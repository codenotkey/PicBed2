(this.webpackJsonppic_bed=this.webpackJsonppic_bed||[]).push([[2],{110:function(e,t,n){},111:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var r,i,o,c,a,s,u,l,p=n(0),b=n.n(p),f=n(24),j=n.n(f),h=(n(110),n.p,n(111),n(30)),O=n(29),d=n(40),g=n(9),y=n(130),m=n(81),w=n(80),v=n(4),x=O.a.header(r||(r=Object(h.a)(["\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  padding: 10px 0px;\n  background-color: white;\n  box-shadow: 0 0 8px 0 rgba(28,31,33,.1);\n  flex-wrap: nowrap;\n  @media(max-width: 500px){\n    \n}\n"]))),U=Object(O.a)(d.b)(i||(i=Object(h.a)(["\n  font-size: 18px;\n  color:  #004fff;\n  @media(max-width: 500px){\n    display: none;\n  }\n"]))),P=Object(O.a)(d.b)(o||(o=Object(h.a)(["\n  color: #423f3f;\n  margin-left: 30px;\n  white-space: nowrap;\n  \n  &.active {\n    color:#004fff;\n    padding-bottom: 2px;\n    border-bottom: 2px solid #4680ff;\n  }\n"]))),k=O.a.div(c||(c=Object(h.a)(["\n  //margin-left: auto;\n  \n"]))),z=Object(O.a)(y.a)(a||(a=Object(h.a)(["\n  margin-left: 10px;\n"]))),L=Object(w.a)((function(){var e=Object(g.f)(),t=Object(m.a)(),n=t.AuthStore,r=t.UserStore;return Object(p.useEffect)((function(){r.pullUser()}),[]),Object(v.jsxs)(x,{children:[Object(v.jsxs)("nav",{children:[Object(v.jsx)(P,{to:"/",activeClassName:"active",exact:!0,children:"\u9996\u9875"}),Object(v.jsx)(P,{to:"/history",activeClassName:"active",children:"\u5386\u53f2"}),Object(v.jsx)(P,{to:"/about",activeClassName:"active",children:"\u5173\u4e8e"})]}),Object(v.jsx)(U,{to:"/",activeClassName:"active",exact:!0,children:"PicBed"}),Object(v.jsx)(k,{children:r.currentUser?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("span",{children:["\u4f60\u597d\uff01",r.currentUser.attributes.username]}),Object(v.jsx)(z,{type:"primary",shape:"round",onClick:function(){n.logout()},children:"\u6ce8\u9500"})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(z,{type:"primary",shape:"round",onClick:function(){console.log("\u8df3\u8f6c\u767b\u5f55\u4e5f"),e.push("/login")},children:"\u767b\u5f55"}),Object(v.jsx)(z,{type:"primary",shape:"round",onClick:function(){console.log("\u8df3\u8f6c\u6ce8\u518c\u9875"),e.push("/register")},children:"\u6ce8\u518c"})]})})]})})),D=n.p+"static/media/GitHub.df7e5ae8.svg",F=O.a.footer(s||(s=Object(h.a)(["\n  padding: 4px 20px;\n  text-align: center;\n  font-size: 12px;\n  display: flex;\n  justify-content: flex-end;\n  background-color: #ffffff;\n"]))),I=O.a.a(u||(u=Object(h.a)(["\n  color: #24292f;\n  font-size: 16px;\n"]))),C=O.a.img(l||(l=Object(h.a)(["\n  height: 24px;\n  margin-right: 4px;\n"])));var S=function(){return Object(v.jsxs)(F,{children:[Object(v.jsx)(C,{src:D}),Object(v.jsx)(I,{href:"https://github.com/codenotkey/picBed",children:"\u9879\u76ee\u6e90\u7801"})]})};var M=function(){return Object(v.jsx)("div",{children:"\u52a0\u8f7d\u4e2d"})},A=Object(p.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(10)]).then(n.bind(null,278))})),N=Object(p.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,268))})),q=Object(p.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,277))})),B=Object(p.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(9)]).then(n.bind(null,279))})),E=Object(p.lazy)((function(){return n.e(8).then(n.bind(null,269))})),H=Object(p.lazy)((function(){return Promise.all([n.e(13),n.e(7)]).then(n.bind(null,270))}));var T=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(L,{}),Object(v.jsx)("main",{children:Object(v.jsx)(p.Suspense,{fallback:Object(v.jsx)(M,{}),children:Object(v.jsxs)(g.c,{children:[Object(v.jsx)(g.a,{path:"/",exact:!0,component:A}),Object(v.jsx)(g.a,{path:"/login",component:N}),Object(v.jsx)(g.a,{path:"/register",component:q}),Object(v.jsx)(g.a,{path:"/history",component:B}),Object(v.jsx)(g.a,{path:"/about",component:E}),Object(v.jsx)(g.a,{path:"*",component:H})]})})}),Object(v.jsx)(S,{})]})},W=function(e){e&&e instanceof Function&&n.e(14).then(n.bind(null,271)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),o(e),c(e)}))};n(128);j.a.render(Object(v.jsx)(b.a.StrictMode,{children:Object(v.jsx)(d.a,{children:Object(v.jsx)(T,{})})}),document.getElementById("root")),W()},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var r=n(23),i=n.n(r);n(112);i.a.init({appId:"qUoILAETnUgzCrW0yiziLHlw-MdYXbMMI",appKey:"NgDxLfs1De0WmqEoLr8bGn6m",serverURL:"https://quoilaet.api.lncldglobal.com"});var o={register:function(e,t){var n=new r.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},login:function(e,t){return new Promise((function(n,i){r.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return i(e)}))}))},getCurrentUser:function(){return r.User.current()},logout:function(){r.User.logOut()}},c={add:function(e,t){var n=new i.a.Object("Image"),r=new i.a.File(t,e);return n.set("filename",t),n.set("owner",i.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},find:function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,o=void 0===r?10:r,c=new i.a.Query("Image");return c.include("owner"),c.limit(o),c.skip(n*o),c.descending("createdAt"),c.equalTo("owner",i.a.User.current()),new Promise((function(e,t){c.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},delete:function(e){var t=i.a.Object.createWithoutData("Image",e);return t.destroy(),new Promise((function(e,n){t.destroy().then((function(){return e("\u5220\u9664\u6210\u529f")})).catch((function(e){return n(e)}))}))}}},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r,i,o,c,a,s,u,l,p,b,f,j,h,O,d,g,y=n(13),m=n(35),w=n(36),v=n(6),x=(n(59),n(3)),U=n(25),P=new(r=function(){function e(){Object(m.a)(this,e),Object(y.a)(this,"currentUser",i,this)}return Object(w.a)(e,[{key:"pullUser",value:function(){this.currentUser=U.a.getCurrentUser()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),i=Object(v.a)(r.prototype,"currentUser",[x.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(v.a)(r.prototype,"pullUser",[x.f],Object.getOwnPropertyDescriptor(r.prototype,"pullUser"),r.prototype),Object(v.a)(r.prototype,"resetUser",[x.f],Object.getOwnPropertyDescriptor(r.prototype,"resetUser"),r.prototype),r),k=new(o=function(){function e(){Object(m.a)(this,e),Object(y.a)(this,"isLogin",c,this),Object(y.a)(this,"isLoading",a,this),Object(y.a)(this,"values",s,this)}return Object(w.a)(e,[{key:"setIsLogin",value:function(e){this.isLogin=e}},{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return console.log("\u767b\u5f55\u4e2d"),new Promise((function(t,n){U.a.login(e.values.username,e.values.password).then((function(e){P.pullUser(),t(e)})).catch((function(e){P.resetUser(),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){U.a.register(e.values.username,e.values.password).then((function(e){P.pullUser(),t(e)})).catch((function(e){P.resetUser(),n(e)}))}))}},{key:"logout",value:function(){U.a.logout(),P.resetUser()}}]),e}(),c=Object(v.a)(o.prototype,"isLogin",[x.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=Object(v.a)(o.prototype,"isLoading",[x.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=Object(v.a)(o.prototype,"values",[x.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"chensen",password:""}}}),Object(v.a)(o.prototype,"setIsLogin",[x.f],Object.getOwnPropertyDescriptor(o.prototype,"setIsLogin"),o.prototype),Object(v.a)(o.prototype,"setUsername",[x.f],Object.getOwnPropertyDescriptor(o.prototype,"setUsername"),o.prototype),Object(v.a)(o.prototype,"setPassword",[x.f],Object.getOwnPropertyDescriptor(o.prototype,"setPassword"),o.prototype),Object(v.a)(o.prototype,"login",[x.f],Object.getOwnPropertyDescriptor(o.prototype,"login"),o.prototype),Object(v.a)(o.prototype,"register",[x.f],Object.getOwnPropertyDescriptor(o.prototype,"register"),o.prototype),Object(v.a)(o.prototype,"logout",[x.f],Object.getOwnPropertyDescriptor(o.prototype,"logout"),o.prototype),o),z=new(u=function(){function e(){Object(m.a)(this,e),Object(y.a)(this,"filename",l,this),Object(y.a)(this,"file",p,this),Object(y.a)(this,"isUploading",b,this),Object(y.a)(this,"serverFile",f,this)}return Object(w.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUploading=!0,new Promise((function(t,n){U.b.add(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){console.log("\u4e0a\u4f20\u5728\u8c03\u7528\u9636\u6bb5\u5931\u8d25"),n(e)})).finally((function(){e.isUploading=!1}))}))}}]),e}(),l=Object(v.a)(u.prototype,"filename",[x.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=Object(v.a)(u.prototype,"file",[x.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=Object(v.a)(u.prototype,"isUploading",[x.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=Object(v.a)(u.prototype,"serverFile",[x.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(v.a)(u.prototype,"setFilename",[x.f],Object.getOwnPropertyDescriptor(u.prototype,"setFilename"),u.prototype),Object(v.a)(u.prototype,"setFile",[x.f],Object.getOwnPropertyDescriptor(u.prototype,"setFile"),u.prototype),Object(v.a)(u.prototype,"upload",[x.f],Object.getOwnPropertyDescriptor(u.prototype,"upload"),u.prototype),u),L=n(104),D=n(103),F=n(0),I=new(j=function(){function e(){Object(m.a)(this,e),Object(y.a)(this,"list",h,this),Object(y.a)(this,"isLoading",O,this),Object(y.a)(this,"hasMore",d,this),Object(y.a)(this,"page",g,this),this.my=[],this.limit=10}return Object(w.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;console.log("\u89e6\u53d1\u67e5\u627e\u65b9\u6cd5"),this.isLoading=!0,U.b.find({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1),console.log(e.list)})).catch((function(e){D.b.error("\u6570\u636e\u52a0\u8f7d\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"deleteItem",value:function(e,t){var n=this;U.b.delete(e).then((function(e){var r=Object(L.a)(n.list);r.splice(t,1),n.list=r,D.b.info("\u5220\u9664\u6210\u529f")})).catch((function(e){console.log(e)}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}}]),e}(),h=Object(v.a)(j.prototype,"list",[x.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=Object(v.a)(j.prototype,"isLoading",[x.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=Object(v.a)(j.prototype,"hasMore",[x.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=Object(v.a)(j.prototype,"page",[x.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(v.a)(j.prototype,"append",[x.f],Object.getOwnPropertyDescriptor(j.prototype,"append"),j.prototype),Object(v.a)(j.prototype,"find",[x.f],Object.getOwnPropertyDescriptor(j.prototype,"find"),j.prototype),Object(v.a)(j.prototype,"deleteItem",[x.f],Object.getOwnPropertyDescriptor(j.prototype,"deleteItem"),j.prototype),Object(v.a)(j.prototype,"reset",[x.f],Object.getOwnPropertyDescriptor(j.prototype,"reset"),j.prototype),j),C=Object(F.createContext)({AuthStore:k,UserStore:P,ImageStore:z,HistoryStore:I});window.stores={AuthStore:k,UserStore:P,ImageStore:z,HistoryStore:I};var S=function(){return Object(F.useContext)(C)}}},[[129,3,4]]]);
//# sourceMappingURL=main.c8a70e76.chunk.js.map